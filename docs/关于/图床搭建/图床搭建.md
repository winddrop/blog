---
title: 图床搭建
description: 图床搭建
date: '2025-08-18T09:42:00.000Z'
updated: '2025-08-21T03:14:00.000Z'
category:
  - 关于
  - 图床搭建
tags:
  - 其他
notion_id: 253314c0-6846-8019-8914-f250d33fa281
notion_url: 'https://www.notion.so/253314c0684680198914f250d33fa281'
---
# 图床搭建
[**图床搭建CloudFlare-ImgBed **](https://github.com/MarSeventh/CloudFlare-ImgBed)

**Cloudflare Pages 部署**

🔖 **书签**: [https://cfbed.sanyue.de/deployment/cloudflare.html](https://cfbed.sanyue.de/deployment/cloudflare.html)

# **Fork 项目**

1. 访问 [**CloudFlare ImgBed 项目**](https://github.com/MarSeventh/CloudFlare-ImgBed)
1. 点击右上角的 "Fork" 按钮
1. 选择您的 GitHub 账户
1. 确认 Fork 完成
# **创建 Pages 项目**

### **2.1 访问 Cloudflare Dashboard**

1. 登录 [**Cloudflare Dashboard**](https://dash.cloudflare.com/)
1. 选择左侧菜单的 "Workers & Pages"
1. 点击 "创建应用程序"
1. 选择 "Pages" 选项卡
1. 点击 "连接到 Git"
![](https://img.winddrop.top/file/blogFolder/253314c06846802a8282f265e5e9ffad/1755746105898_notion_1755746098920_8hfu8l.png)

### **2.2 连接 GitHub 仓库**

1. 如果首次使用，需要授权 Cloudflare 访问 GitHub
1. 选择您 Fork 的 `CloudFlare-ImgBed` 仓库
1. 点击 "开始设置"
### **2.3 配置项目设置**

| **配置项** | **值** | **说明** |
| --- | --- | --- |
| 项目名称 | `cloudflare-imgbed`（或自定义） | 项目标识符 |
| 生产分支 | `main` | 生产环境分支 |
| 构建命令 | `npm install` | **重要：v2.0 新构建命令** |
| 构建输出目录 | `/` | 保持默认 |

![](https://img.winddrop.top/file/blogFolder/253314c06846802a8282f265e5e9ffad/1755746125293_notion_1755746116823_ea5e8k.png)

**重要提醒**

v2.0 版本的构建命令已变更为 `npm install`，请确保使用正确的构建命令。

### **2.4 部署项目**

1. 点击 "保存并部署"
1. 等待首次部署完成（约 2-3 分钟）
# **配置 KV 数据库**

KV 数据库用于存储文件元数据，是必需的组件。

### **3.1 创建 KV 命名空间**

1. 在 Cloudflare Dashboard 中选择 "Workers & Pages"
1. 点击 "KV"
1. 点击 "创建命名空间"
1. 输入命名空间名称：`img_url`（建议使用此名称）
1. 点击 "添加"
![](https://img.winddrop.top/file/blogFolder/253314c06846802a8282f265e5e9ffad/1755746129178_notion_1755746126778_2dpny2.png)

![](https://img.winddrop.top/file/blogFolder/253314c06846802a8282f265e5e9ffad/1755746145763_notion_1755746135062_icl8so.png)

### **3.2 绑定 KV 到项目**

1. 返回您的 Pages 项目
1. 选择 "设置" → "绑定"
1. 点击 "添加" → "KV 命名空间"
1. 填写绑定信息：
   - **变量名称**：`img_url`（必须是这个名称）
   - **KV 命名空间**：选择刚创建的命名空间
1. 点击 "保存"
**注意**

绑定 KV 时，变量名称必须为 `img_url`，这是项目预设的变量名，填错会出现无法进入管理界面等情况。

# **重新部署**

绑定 KV 后需要重新部署以生效：

1. 进入项目的 "部署" 页面
1. 找到最新的部署记录
1. 点击右侧的 "..." 菜单
1. 选择 "重试部署"
1. 等待部署完成
![](https://img.winddrop.top/file/blogFolder/253314c06846802a8282f265e5e9ffad/1755746171314_notion_1755746160810_4q124n.png)

# **Telegram 配置bot**

1. **创建一个 Telegram 机器人**
   - 在 Telegram 中搜索“BotFather”，并用它创建一个机器人（注意记下 bot 的 Token）。
1. **将机器人添加到你的群组**
   - 在群组中添加你的机器人，确保机器人具有读取信息权限。
1. **让机器人收到一条消息或加入事件**
   - 向群组发送一条消息，或者让机器人在群组中启动，确保机器人能收到通知。
1. **使用 Telegram API 获取更新**
   - 调用 `getUpdates` 方法，获取包含 Chat ID 的更新信息。
```plain text
https://api.telegram.org/bot<你的Bot Token>/getUpdates
```

需要机器人 `can_read_all_group_messages`  权限，如果没有读取所有信息权限

使用接口

```powershell
https://api.telegram.org/bot<YourBotToken>/promoteChatMember
// 响应
{
  "chat_id": "<群组ID>",
  "user_id": <机器人用户ID>,
  "can_read_all_group_messages": true
}
```

# 存储渠道配置

至此已经完成项目在 Cloudflare Pages 的部署，但是尚未添加存储渠道，添加存储渠道和进行其他设置的方式请参考
[https://cfbed.sanyue.de/deployment/configuration.html#%F0%9F%97%82%EF%B8%8F-%E5%AD%98%E5%82%A8%E6%B8%A0%E9%81%93%E9%85%8D%E7%BD%AE](https://cfbed.sanyue.de/deployment/configuration.html#%F0%9F%97%82%EF%B8%8F-%E5%AD%98%E5%82%A8%E6%B8%A0%E9%81%93%E9%85%8D%E7%BD%AE)

imgBed 配置上 **Telegram token和chatID**

![](https://img.winddrop.top/file/blogFolder/253314c06846802a8282f265e5e9ffad/1755746661445_notion_1755746649703_e75yqq.png)

![](https://img.winddrop.top/file/blogFolder/253314c06846802a8282f265e5e9ffad/1755746663873_notion_1755746658804_rvyyl3.png)

此时图床已经搭建好了，使用cloudflare 的CloudFlare-ImgBed pages部署的地址可以访问了



## API访问接口，连接 `vitepress`

安全设置新增APIToken

![](https://img.winddrop.top/file/blogFolder/253314c06846802a8282f265e5e9ffad/1755746674112_notion_1755746666691_jrnqw0.png)

在vitepress .env 配置

```powershell
NOTION_TOKEN=notion 集成token
NOTION_DATABASE_ID=notion 文档数据库页面地址
IMG_UPLOAD_AUTHCODE=图床APItoken
IMG_BASEURL=https://img.XXX.com  图片显示前缀
IMG_UPLOAD_FOLDER=/blogFolder 上传到图床的文件夹位置
IMG_UPLOAD_URL=https://img.XXX.com/upload   图片上传地址
IMG_DELETE_URL=https://img.XXX.com/api/manage/delete 图片删除地址

```

### API文档

🔖 **书签**: [https://cfbed.sanyue.de/api/](https://cfbed.sanyue.de/api/)

